import{o as n,c as r,b as t,F as d,f as i,v as u,g as m,t as p,d as l}from"./index.58926507.js";const h={class:"loginForm"},g=t("label",null,"Username:",-1),c=t("hr",null,null,-1),f=t("label",null,"Password:",-1),w=t("hr",null,null,-1),b={data(){return{model:{username:"",password:""}}},methods:{deleteToken(){delete l.defaults.headers.common.Authorization,this.$store.commit("authenticate",null)},async sendLoginData(){try{const o=(await l.post("users/login",this.model)).data;l.defaults.headers.common.Authorization=`Bearer ${o.token}`,this.$store.commit("authenticate",o),this.$router.push("/dashboard")}catch(o){o.response.status==401&&alert("Login failed. Invalid credentials.")}}},computed:{authenticated(){return this.$store.state.user.isLoggedIn},username(){return this.$store.state.user.username}}},k=Object.assign(b,{__name:"LoginView",setup(o){return(e,s)=>(n(),r("div",h,[t("form",null,[e.authenticated?(n(),r(d,{key:1},[m(" Angemeldet als "+p(e.username)+" ",1),t("a",{href:"javascript:void(0)",onClick:s[3]||(s[3]=a=>e.deleteToken())},"Abmelden")],64)):(n(),r(d,{key:0},[g,i(t("input",{type:"text",id:"username","onUpdate:modelValue":s[0]||(s[0]=a=>e.model.username=a)},null,512),[[u,e.model.username]]),c,f,i(t("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=a=>e.model.password=a)},null,512),[[u,e.model.password]]),w,t("input",{type:"submit",value:"Submit",onSubmit:s[2]||(s[2]=(...a)=>e.sendLoginData&&e.sendLoginData(...a))},null,32),m(" (Hint: Use lenz, Password 1111) ")],64))])]))}});export{k as default};
