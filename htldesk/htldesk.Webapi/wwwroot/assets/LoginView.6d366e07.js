import{o as r,c as l,F as i,b as a,d as n,w as u,v as m,t as p,f as d}from"./index.c45e1d8d.js";const g={class:"loginForm"},h={data(){return{model:{username:"",password:""}}},methods:{deleteToken(){delete d.defaults.headers.common.Authorization,this.$store.commit("authenticate",null)},async sendLoginData(){try{const o=(await d.post("users/login",this.model)).data;d.defaults.headers.common.Authorization=`Bearer ${o.token}`,this.$store.commit("authenticate",o)}catch(o){o.response.status==401&&alert("Login failed. Invalid credentials.")}}},computed:{authenticated(){return this.$store.state.user.isLoggedIn},username(){return this.$store.state.user.username}}},k=Object.assign(h,{__name:"LoginView",setup(o){return(e,t)=>(r(),l("div",g,[e.authenticated?(r(),l(i,{key:1},[n(" Angemeldet als "+p(e.username)+" ",1),a("a",{href:"javascript:void(0)",onClick:t[3]||(t[3]=(...s)=>e.deleteToken&&e.deleteToken(...s))},"Abmelden")],64)):(r(),l(i,{key:0},[a("label",null,[n("Username: "),u(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>e.model.username=s)},null,512),[[m,e.model.username]])]),a("label",null,[n("Password: "),u(a("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=s=>e.model.password=s)},null,512),[[m,e.model.password]])]),a("button",{type:"button",onClick:t[2]||(t[2]=(...s)=>e.sendLoginData&&e.sendLoginData(...s))},"Submit"),n(" (Hint: Use lenz, Password 1111) ")],64))]))}});export{k as default};
